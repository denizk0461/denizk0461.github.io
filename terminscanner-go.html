<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta name='viewport' content='width=device-width'>
        <title>Terminscanner StugA GO</title>
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@500&family=Kanit&display=swap');
            * {
                font-family: 'Kanit', sans-serif;
            }

            body {
                max-width: 20cm;
                margin: auto;
                background-color: #212121;
                color: #e0e0e0;
                padding-left: 16px;
                padding-right: 16px;
            }

            option {
                font-family: 'IBM Plex Sans', sans-serif;
                font-weight: 500;
            }

            .error-text {
                color: #ff4a4a;
            }

            .success-text {
                color: #58ff58;
            }

            .img-centered {
                margin-left: auto;
                margin-right: auto;
                display: block;
            }

            .qr-background {
                background-color: #e0e0e0;
                padding: 16px;
                width: fit-content;
                margin: auto;
            }

            video {
                width: 80%;
                height: 80%;
            }
        </style>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/qr-scanner/1.2.0/qr-scanner.umd.min.js" integrity="sha512-Nuui3EFs8jRtm6BuX5sekqEI98P2ZgoVoPxoIpL12GsqFszuPsG2KsAiNBq6tUnqEbKHjpNz5m6WMXEotec9RQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script>
            // import QrScanner from "/libraries/qr-scanner.min.js";
            
            const CACHE_KEY = "stuga-go-zeitslots-ersttreffen";
            var qrscanner;

            var timeslots = [
                "08:00", "08:15", "08:30", "08:45",
                "09:00", "09:15", "09:30", "09:45",
                "10:00", "10:15", "10:30", "10:45",
                "11:00", "11:15", "11:30", "11:45",
                "12:00", "12:15", "12:30", "12:45",
                "13:00", "13:15", "13:30", "13:45",
                "14:00", "14:15", "14:30", "14:45",
                "15:00", "15:15", "15:30", "15:45",
                "16:00", "16:15", "16:30", "16:45",
                "17:00", "17:15", "17:30", "17:45",
                "18:00", "18:15", "18:30", "18:45",
                "19:00", "19:15", "19:30", "19:45"
            ];

            var days = [
                "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag", "Sonntag"
            ];

            window.onload = function() {
                qrscanner = new QrScanner(
                    document.getElementById("qrscanner"),
                    result => {
                        console.log("decoded qr code: ", result);
                    },
                );
            }

            function startScan() {
                qrscanner.start();
            }
        </script>
    </head>
    <body>
        <div id="hidden" style="display: none;"> 
            <div class="timeslot" style="margin-top: 12px;">
                <select class="day" name="day">
                    <option value="">- wähle einen Tag -</option>
                    <option value="0">Montag</option>
                    <option value="1">Dienstag</option>
                    <option value="2">Mittwoch</option>
                    <option value="3">Donnerstag</option>
                    <option value="4">Freitag</option>
                    <option value="5">Samstag</option>
                    <option value="6">Sonntag</option>
                </select>
                <select class="time-start" name="time-start">
                    <option value="">- wähle eine Startuhrzeit -</option>
                    <option value="0800">08:00</option>
                    <option value="0815">08:15</option>
                    <option value="0830">08:30</option>
                    <option value="0845">08:45</option>
                    <option value="0900">09:00</option>
                    <option value="0915">09:15</option>
                    <option value="0930">09:30</option>
                    <option value="0945">09:45</option>
                    <option value="1000">10:00</option>
                    <option value="1015">10:15</option>
                    <option value="1030">10:30</option>
                    <option value="1045">10:45</option>
                    <option value="1100">11:00</option>
                    <option value="1115">11:15</option>
                    <option value="1130">11:30</option>
                    <option value="1145">11:45</option>
                    <option value="1200">12:00</option>
                    <option value="1215">12:15</option>
                    <option value="1230">12:30</option>
                    <option value="1245">12:45</option>
                    <option value="1300">13:00</option>
                    <option value="1315">13:15</option>
                    <option value="1330">13:30</option>
                    <option value="1345">13:45</option>
                    <option value="1400">14:00</option>
                    <option value="1415">14:15</option>
                    <option value="1430">14:30</option>
                    <option value="1445">14:45</option>
                    <option value="1500">15:00</option>
                    <option value="1515">15:15</option>
                    <option value="1530">15:30</option>
                    <option value="1545">15:45</option>
                    <option value="1600">16:00</option>
                    <option value="1615">16:15</option>
                    <option value="1630">16:30</option>
                    <option value="1645">16:45</option>
                    <option value="1700">17:00</option>
                    <option value="1715">17:15</option>
                    <option value="1730">17:30</option>
                    <option value="1745">17:45</option>
                    <option value="1800">18:00</option>
                    <option value="1815">18:15</option>
                    <option value="1830">18:30</option>
                    <option value="1845">18:45</option>
                    <option value="1900">19:00</option>
                    <option value="1915">19:15</option>
                    <option value="1930">19:30</option>
                    <option value="1945">19:45</option>
                    <option value="2000">20:00</option>
                </select>
                <select class="time-end" name="time-end">
                    <option value="">- wähle eine Enduhrzeit -</option>
                    <option value="0800">08:00</option>
                    <option value="0815">08:15</option>
                    <option value="0830">08:30</option>
                    <option value="0845">08:45</option>
                    <option value="0900">09:00</option>
                    <option value="0915">09:15</option>
                    <option value="0930">09:30</option>
                    <option value="0945">09:45</option>
                    <option value="1000">10:00</option>
                    <option value="1015">10:15</option>
                    <option value="1030">10:30</option>
                    <option value="1045">10:45</option>
                    <option value="1100">11:00</option>
                    <option value="1115">11:15</option>
                    <option value="1130">11:30</option>
                    <option value="1145">11:45</option>
                    <option value="1200">12:00</option>
                    <option value="1215">12:15</option>
                    <option value="1230">12:30</option>
                    <option value="1245">12:45</option>
                    <option value="1300">13:00</option>
                    <option value="1315">13:15</option>
                    <option value="1330">13:30</option>
                    <option value="1345">13:45</option>
                    <option value="1400">14:00</option>
                    <option value="1415">14:15</option>
                    <option value="1430">14:30</option>
                    <option value="1445">14:45</option>
                    <option value="1500">15:00</option>
                    <option value="1515">15:15</option>
                    <option value="1530">15:30</option>
                    <option value="1545">15:45</option>
                    <option value="1600">16:00</option>
                    <option value="1615">16:15</option>
                    <option value="1630">16:30</option>
                    <option value="1645">16:45</option>
                    <option value="1700">17:00</option>
                    <option value="1715">17:15</option>
                    <option value="1730">17:30</option>
                    <option value="1745">17:45</option>
                    <option value="1800">18:00</option>
                    <option value="1815">18:15</option>
                    <option value="1830">18:30</option>
                    <option value="1845">18:45</option>
                    <option value="1900">19:00</option>
                    <option value="1915">19:15</option>
                    <option value="1930">19:30</option>
                    <option value="1945">19:45</option>
                    <option value="2000">20:00</option>
                </select>
                <button onclick="return this.parentNode.remove();" class="remove">❌</button>
            </div>
        </div>
        <h1>Terminscanner für das StugA GO-Ersttreffen</h1>
        <button onclick="startScan()">Scan starten</button>
        <video id="qrscanner"></video>
    </body>
</html>